# üöÄ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é –Ω–∞ —Ö–æ—Å—Ç–∏–Ω–≥

## üìã **–î–∞–Ω–Ω—ã–µ —Ö–æ—Å—Ç–∏–Ω–≥–∞:**

**–°–µ—Ä–≤–µ—Ä:** server276.hosting.reg.ru  
**IP:** 37.140.192.181  
**–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** https://server276.hosting.reg.ru:1500/  
**–õ–æ–≥–∏–Ω:** u3217624  
**–ü–∞—Ä–æ–ª—å:** NL3cd9nqp4XGIJ36  

**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö MySQL:**
- –õ–æ–≥–∏–Ω: u3217624_default
- –ü–∞—Ä–æ–ª—å: 5ID35vgJb8UEisla
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: u3217624_default
- Host: localhost

## üîß **–®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ñ–∞–π–ª–æ–≤**

1. **–°–æ–∑–¥–∞–π—Ç–µ –∞—Ä—Ö–∏–≤ –ø—Ä–æ–µ–∫—Ç–∞:**
   ```bash
   zip -r whatsapp-multi-user.zip . -x "node_modules/*" ".wwebjs_auth/*" ".wwebjs_cache/*"
   ```

2. **–ò—Å–∫–ª—é—á–∏—Ç–µ –∏–∑ –∞—Ä—Ö–∏–≤–∞:**
   - `node_modules/` (—É—Å—Ç–∞–Ω–æ–≤–∏–º –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ)
   - `.wwebjs_auth/` (—Å–µ—Å—Å–∏–∏ WhatsApp)
   - `.wwebjs_cache/` (–∫—ç—à WhatsApp)

## üåê **–®–∞–≥ 2: –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —Ö–æ—Å—Ç–∏–Ω–≥**

1. **–í–æ–π–¥–∏—Ç–µ –≤ –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** https://server276.hosting.reg.ru:1500/
2. **–õ–æ–≥–∏–Ω:** u3217624
3. **–ü–∞—Ä–æ–ª—å:** NL3cd9nqp4XGIJ36

## üìÅ **–®–∞–≥ 3: –°–æ–∑–¥–∞–Ω–∏–µ –¥–æ–º–µ–Ω–∞**

1. –í –ø–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **"–î–æ–º–µ–Ω—ã"**
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –¥–æ–º–µ–Ω –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ–¥–¥–æ–º–µ–Ω
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ **PHP 8.1** –∏–ª–∏ –≤—ã—à–µ
4. –í–∫–ª—é—á–∏—Ç–µ **Node.js**

## üîß **–®–∞–≥ 4: –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤**

1. **–ß–µ—Ä–µ–∑ SFTP:**
   - –•–æ—Å—Ç: server276.hosting.reg.ru
   - –ü–æ—Ä—Ç: 22
   - –õ–æ–≥–∏–Ω: u3217624
   - –ü–∞—Ä–æ–ª—å: NL3cd9nqp4XGIJ36

2. **–ò–ª–∏ —á–µ—Ä–µ–∑ –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
   - –ó–∞–≥—Ä—É–∑–∏—Ç–µ –∞—Ä—Ö–∏–≤ –≤ –∫–æ—Ä–Ω–µ–≤—É—é –ø–∞–ø–∫—É —Å–∞–π—Ç–∞
   - –†–∞—Å–ø–∞–∫—É–π—Ç–µ —Ñ–∞–π–ª—ã

## üì¶ **–®–∞–≥ 5: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**

1. **–ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –ø–æ SSH:**
   ```bash
   ssh u3217624@server276.hosting.reg.ru
   ```

2. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–∞–ø–∫—É —Å–∞–π—Ç–∞:**
   ```bash
   cd /home/u3217624/domains/znam.fun/public_html
   ```

3. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Node.js –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
   ```bash
   npm install
   ```

## ‚öôÔ∏è **–®–∞–≥ 6: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö**

1. **–°–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö MySQL:**
   - –õ–æ–≥–∏–Ω: u3217624_default
   - –ü–∞—Ä–æ–ª—å: 5ID35vgJb8UEisla
   - –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: u3217624_default

2. **–ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É:**
   ```sql
   CREATE TABLE users (
       id INT AUTO_INCREMENT PRIMARY KEY,
       username VARCHAR(50) UNIQUE NOT NULL,
       password VARCHAR(255) NOT NULL,
       fullName VARCHAR(100) NOT NULL,
       phone VARCHAR(20),
       role ENUM('admin', 'user') DEFAULT 'user',
       whatsappSession JSON,
       createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP
   );

   CREATE TABLE messages (
       id BIGINT PRIMARY KEY,
       userId INT NOT NULL,
       number VARCHAR(20) NOT NULL,
       message TEXT NOT NULL,
       timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
       FOREIGN KEY (userId) REFERENCES users(id)
   );

   -- –î–æ–±–∞–≤—å—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   INSERT INTO users (username, password, fullName, phone, role) VALUES
   ('admin', '1', '–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä', '+7 (999) 123-45-67', 'admin'),
   ('user1', '123', '–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤', '+7 (999) 111-22-33', 'user'),
   ('user2', '123', '–ú–∞—Ä–∏—è –°–∏–¥–æ—Ä–æ–≤–∞', '+7 (999) 444-55-66', 'user');
   ```

## üîß **–®–∞–≥ 7: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞**

1. **–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:**
   ```bash
   nano ecosystem.config.js
   ```

2. **–î–æ–±–∞–≤—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é PM2:**
   ```javascript
   module.exports = {
     apps: [{
       name: 'whatsapp-multi',
       script: 'server-multi.js',
       instances: 1,
       autorestart: true,
       watch: false,
       max_memory_restart: '1G',
       env: {
         NODE_ENV: 'production',
         PORT: 3001
       }
     }]
   };
   ```

## üöÄ **–®–∞–≥ 8: –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞**

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ PM2:**
   ```bash
   npm install -g pm2
   ```

2. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä:**
   ```bash
   pm2 start ecosystem.config.js
   pm2 save
   pm2 startup
   ```

## üîí **–®–∞–≥ 9: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏**

1. **–°–æ–∑–¥–∞–π—Ç–µ .htaccess –¥–ª—è –∑–∞—â–∏—Ç—ã:**
   ```apache
   # –ó–∞—â–∏—Ç–∞ –æ—Ç –ø—Ä—è–º–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª–∞–º
   <Files "database.json">
       Order allow,deny
       Deny from all
   </Files>
   
   <Files "server-multi.js">
       Order allow,deny
       Deny from all
   </Files>
   ```

2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç** (–±–µ—Å–ø–ª–∞—Ç–Ω–æ –æ—Ç Let's Encrypt)

## üìä **–®–∞–≥ 10: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å:**
   ```bash
   pm2 status
   pm2 logs whatsapp-multi
   ```

2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å–æ–≤:**
   ```bash
   pm2 monit
   ```

## üîß **–®–∞–≥ 11: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–æ–º–µ–Ω–∞**

1. **–°–æ–∑–¥–∞–π—Ç–µ –ø–æ–¥–¥–æ–º–µ–Ω –¥–ª—è API:**
   - api.znam.fun ‚Üí –ø–æ—Ä—Ç 3001

2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø—Ä–æ–∫—Å–∏ –≤ –ø–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
   ```
   Location: /api/
   Proxy: http://localhost:3001/api/
   ```

## ‚úÖ **–®–∞–≥ 12: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**

1. **–û—Ç–∫—Ä–æ–π—Ç–µ —Å–∞–π—Ç:** https://znam.fun
2. **–í–æ–π–¥–∏—Ç–µ –∫–∞–∫ admin:** –ª–æ–≥–∏–Ω `admin`, –ø–∞—Ä–æ–ª—å `1`
3. **–ò–ª–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å** –∫–∞–∫ –Ω–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
4. **–ü–æ–¥–∫–ª—é—á–∏—Ç–µ WhatsApp** —á–µ—Ä–µ–∑ QR-–∫–æ–¥
5. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –æ—Ç–ø—Ä–∞–≤–∫—É —Å–æ–æ–±—â–µ–Ω–∏–π**

## üÜï **–ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**

### ‚úÖ **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:**
- –ù–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –Ω–∞ —Å–∞–π—Ç–µ
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö

### ‚úÖ **–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã:**
- –ö–∞–∂–¥—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–º–µ–µ—Ç —Å–≤–æ–π WhatsApp –∫–ª–∏–µ–Ω—Ç
- –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —á–∞—Ç—ã –∏ —Å–æ–æ–±—â–µ–Ω–∏—è
- –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ QR-–∫–æ–¥—ã –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

### ‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
- –ü–∞—Ä–æ–ª–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- –ó–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

## üìà **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**

**–î–ª—è 15 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–∞ Host-B:**
- **CPU:** 2.2 –ì–ì—Ü (–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è 10-12 –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤)
- **RAM:** –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 8+ –ì–ë
- **–î–∏—Å–∫:** 50 –ì–ë SSD (—Ö–≤–∞—Ç–∏—Ç –Ω–∞ 15 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)

## üîß **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è —Ö–æ—Å—Ç–∏–Ω–≥–∞:**

1. **–û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:**
   ```javascript
   const MAX_CONCURRENT_USERS = 10;
   ```

2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–≤—Ç–æ–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö:**
   ```javascript
   pm2 restart whatsapp-multi --max-memory-restart 1G
   ```

3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ª–æ–≥–æ–≤:**
   ```bash
   pm2 logs whatsapp-multi --lines 100
   ```

## üÜò **–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫:**

1. **–°–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è:**
   ```bash
   pm2 delete whatsapp-multi
   pm2 start ecosystem.config.js
   ```

2. **WhatsApp –∫–ª–∏–µ–Ω—Ç—ã –Ω–µ –ø–æ–¥–∫–ª—é—á–∞—é—Ç—Å—è:**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ—Ä—Ç 3001 –æ—Ç–∫—Ä—ã—Ç
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `pm2 logs whatsapp-multi`

3. **–í—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ CPU:**
   - –û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤
   - –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–≤—Ç–æ–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ø–∞–º—è—Ç–∏

4. **–ü—Ä–æ–±–ª–µ–º—ã —Å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–µ–π:**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–∞–±–ª–∏—Ü–∞ `users` —Å–æ–∑–¥–∞–Ω–∞
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª—É `database.json`

## üìû **–ü–æ–¥–¥–µ—Ä–∂–∫–∞:**

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `pm2 logs whatsapp-multi`
2. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å–æ–≤: `pm2 monit`
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞: `pm2 restart whatsapp-multi`

**–£—Å–ø–µ—à–Ω–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è! üöÄ** 